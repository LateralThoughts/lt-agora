{% extends "base.html" %}
{% block nav_prop %}class="active"{% endblock %}
{% load comments %}
{% load crispy_forms_tags %}

{% block content %}
<h1>Décision : "{{ object.title }}" ({{ object.balance }})</h1>

{% include "agora/inc_decision_detail.html" with obj=object only %}
{% include "agora/inc_decision_action_bar.html" with obj=object user=user only %}
<h2>Timeline</h2>
{% for vote in object.votes.all %}
    {% include 'agora/inc_vote_detail.html' with obj=vote only %}
{% empty %}
<p>Pas encore de votes</p>
{% endfor %}
<ul ng-controller="VoteListCtrl">
    <li ng-repeat="vote in votes.objects">
      <span>le {= vote.created_at =} <strong>{= vote.user.username =}</strong> a voté <strong>{= vote.value =}</strong></span>
    </li>
  </ul>
<h2>Commentaires</h2>
{% render_comment_list for object %}

<h2>Soumettre un commentaire</h2>
{% render_comment_form for object %}
{% endblock %}